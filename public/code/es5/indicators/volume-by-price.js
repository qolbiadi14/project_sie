!/**
 * Highstock JS v12.0.1 (2024-11-28)
 * @module highcharts/indicators/volume-by-price
 * @requires highcharts
 * @requires highcharts/modules/stock
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2024 Pawe≈Ç Dalek
 *
 * License: www.highcharts.com/license
 */function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("highcharts"),require("highcharts").SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/volume-by-price",[["highcharts/highcharts"],["highcharts/highcharts","SeriesRegistry"]],e):"object"==typeof exports?exports["highcharts/volume-by-price"]=e(require("highcharts"),require("highcharts").SeriesRegistry):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry)}(this,function(t,e){return function(){"use strict";var o,n,i={512:function(t){t.exports=e},944:function(e){e.exports=t}},r={};function s(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return i[t](o,o.exports,s),o.exports}s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,{a:e}),e},s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var a={};s.d(a,{default:function(){return L}});var p=s(944),u=/*#__PURE__*/s.n(p),l=s(512),h=/*#__PURE__*/s.n(l),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.destroy=function(){this.negativeGraphic&&(this.negativeGraphic=this.negativeGraphic.destroy()),t.prototype.destroy.apply(this,arguments)},e}(h().seriesTypes.sma.prototype.pointClass),f=(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),m=u().animObject,y=u().noop,v=h().seriesTypes,g=v.column.prototype,x=v.sma,b=u().addEvent,S=u().arrayMax,D=u().arrayMin,V=u().correctFloat,P=u().defined,w=u().error,C=u().extend,A=u().isArray,O=u().merge,z=Math.abs,_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.init=function(e,o){var n=this;delete o.data,t.prototype.init.apply(n,arguments);var i=b(this.chart.constructor,"afterLinkSeries",function(){if(n.options){var t=n.options.params,o=n.linkedParent,r=e.get(t.volumeSeriesID);n.addCustomEvents(o,r)}i()},{order:1});return n},e.prototype.addCustomEvents=function(t,e){var o=this,n=function(){o.chart.redraw(),o.setData([]),o.zoneStarts=[],o.zoneLinesSVG&&(o.zoneLinesSVG=o.zoneLinesSVG.destroy())};return o.dataEventsToUnbind.push(b(t,"remove",function(){n()})),e&&o.dataEventsToUnbind.push(b(e,"remove",function(){n()})),o},e.prototype.animate=function(t){var e=this,o=e.chart.inverted,n=e.group,i={};if(!t&&n){var r=o?e.yAxis.top:e.xAxis.left;o?(n["forceAnimate:translateY"]=!0,i.translateY=r):(n["forceAnimate:translateX"]=!0,i.translateX=r),n.animate(i,C(m(e.options.animation),{step:function(t,o){e.group.attr({scaleX:Math.max(.001,o.pos)})}}))}},e.prototype.drawPoints=function(){this.options.volumeDivision.enabled&&(this.posNegVolume(!0,!0),g.drawPoints.apply(this,arguments),this.posNegVolume(!1,!1)),g.drawPoints.apply(this,arguments)},e.prototype.posNegVolume=function(t,e){var o,n,i,r,s=e?["positive","negative"]:["negative","positive"],a=this.options.volumeDivision,p=this.points.length,u=[],l=[],h=0;for(t?(this.posWidths=u,this.negWidths=l):(u=this.posWidths,l=this.negWidths);h<p;h++)(r=this.points[h])[s[0]+"Graphic"]=r.graphic,r.graphic=r[s[1]+"Graphic"],t&&(o=r.shapeArgs.width,(i=(n=this.priceZones[h]).wholeVolumeData)?(u.push(o/i*n.positiveVolumeData),l.push(o/i*n.negativeVolumeData)):(u.push(0),l.push(0))),r.color=e?a.styles.positiveColor:a.styles.negativeColor,r.shapeArgs.width=e?this.posWidths[h]:this.negWidths[h],r.shapeArgs.x=e?r.shapeArgs.x:this.posWidths[h]},e.prototype.translate=function(){var t,e,o,n,i,r,s,a,p,u,l=this,h=l.options,c=l.chart,d=l.yAxis,f=d.min,m=l.options.zoneLines,y=l.priceZones,v=0;g.translate.apply(l);var x=l.points;x.length&&(s=h.pointPadding<.5?h.pointPadding:.1,t=S(l.volumeDataArray),e=c.plotWidth/2,a=c.plotTop,o=z(d.toPixels(f)-d.toPixels(f+l.rangeStep)),i=z(d.toPixels(f)-d.toPixels(f+l.rangeStep)),s&&(n=z(o*(1-2*s)),v=z((o-n)/2),o=z(n)),x.forEach(function(n,s){p=n.barX=n.plotX=0,u=n.plotY=d.toPixels(y[s].start)-a-(d.reversed?o-i:o)-v,r=V(e*y[s].wholeVolumeData/t),n.pointWidth=r,n.shapeArgs=l.crispCol.apply(l,[p,u,r,o]),n.volumeNeg=y[s].negativeVolumeData,n.volumePos=y[s].positiveVolumeData,n.volumeAll=y[s].wholeVolumeData}),m.enabled&&l.drawZones(c,d,l.zoneStarts,m.styles))},e.prototype.getExtremes=function(){var e,o=this.options.compare,n=this.options.cumulative;return this.options.compare?(this.options.compare=void 0,e=t.prototype.getExtremes.call(this),this.options.compare=o):this.options.cumulative?(this.options.cumulative=!1,e=t.prototype.getExtremes.call(this),this.options.cumulative=n):e=t.prototype.getExtremes.call(this),e},e.prototype.getValues=function(t,e){var o=t.getColumn("x",!0),n=t.processedYData,i=this.chart,r=e.ranges,s=[],a=[],p=[],u=i.get(e.volumeSeriesID);if(!t.chart){w("Base series not found! In case it has been removed, add a new one.",!0,i);return}if(!u||!u.getColumn("x",!0).length){var l=u&&!u.getColumn("x",!0).length?" does not contain any data.":" not found! Check `volumeSeriesID`.";w("Series "+e.volumeSeriesID+l,!0,i);return}var h=A(n[0]);if(h&&4!==n[0].length){w("Type of "+t.name+" series is different than line, OHLC or candlestick.",!0,i);return}return(this.priceZones=this.specifyZones(h,o,n,r,u)).forEach(function(t,e){s.push([t.x,t.end]),a.push(s[e][0]),p.push(s[e][1])}),{values:s,xData:a,yData:p}},e.prototype.specifyZones=function(t,e,o,n,i){var r=!!t&&function(t){for(var e,o=t.length,n=t[0][3],i=n,r=1;r<o;r++)(e=t[r][3])<n&&(n=e),e>i&&(i=e);return{min:n,max:i}}(o),s=this.zoneStarts=[],a=[],p=r?r.min:D(o),u=r?r.max:S(o),l=0,h=1,c=this.linkedParent;if(!this.options.compareToMain&&c.dataModify&&(p=c.dataModify.modifyValue(p),u=c.dataModify.modifyValue(u)),!P(p)||!P(u))return this.points.length&&(this.setData([]),this.zoneStarts=[],this.zoneLinesSVG&&(this.zoneLinesSVG=this.zoneLinesSVG.destroy())),[];var d=this.rangeStep=V(u-p)/n;for(s.push(p);l<n-1;l++)s.push(V(s[l]+d));s.push(u);for(var f=s.length;h<f;h++)a.push({index:h-1,x:e[0],start:s[h-1],end:s[h]});return this.volumePerZone(t,a,i,e,o)},e.prototype.volumePerZone=function(t,e,o,n,i){var r,s,a,p,u,l=this,h=o.getColumn("x",!0),c=o.getColumn("y",!0),d=e.length-1,f=i.length,m=c.length;return z(f-m)&&(n[0]!==h[0]&&c.unshift(0),n[f-1]!==h[m-1]&&c.push(0)),l.volumeDataArray=[],e.forEach(function(e){for(u=0,e.wholeVolumeData=0,e.positiveVolumeData=0,e.negativeVolumeData=0;u<f;u++){s=!1,a=!1,p=t?i[u][3]:i[u],r=u?t?i[u-1][3]:i[u-1]:p;var o=l.linkedParent;!l.options.compareToMain&&o.dataModify&&(p=o.dataModify.modifyValue(p),r=o.dataModify.modifyValue(r)),p<=e.start&&0===e.index&&(s=!0),p>=e.end&&e.index===d&&(a=!0),(p>e.start||s)&&(p<e.end||a)&&(e.wholeVolumeData+=c[u],r>p?e.negativeVolumeData+=c[u]:e.positiveVolumeData+=c[u])}l.volumeDataArray.push(e.wholeVolumeData)}),e},e.prototype.drawZones=function(t,e,o,n){var i,r=t.renderer,s=t.plotWidth,a=t.plotTop,p=this.zoneLinesSVG,u=[];o.forEach(function(o){i=e.toPixels(o)-a,u=u.concat(t.renderer.crispLine([["M",0,i],["L",s,i]],n.lineWidth))}),p?p.animate({d:u}):p=this.zoneLinesSVG=r.path(u).attr({"stroke-width":n.lineWidth,stroke:n.color,dashstyle:n.dashStyle,zIndex:this.group.zIndex+.1}).add(this.group)},e.defaultOptions=O(x.defaultOptions,{params:{index:void 0,period:void 0,ranges:12,volumeSeriesID:"volume"},zoneLines:{enabled:!0,styles:{color:"#0A9AC9",dashStyle:"LongDash",lineWidth:1}},volumeDivision:{enabled:!0,styles:{positiveColor:"rgba(144, 237, 125, 0.8)",negativeColor:"rgba(244, 91, 91, 0.8)"}},animationLimit:1e3,enableMouseTracking:!1,pointPadding:0,zIndex:-1,crisp:!0,dataGrouping:{enabled:!1},dataLabels:{allowOverlap:!0,enabled:!0,format:"P: {point.volumePos:.2f} | N: {point.volumeNeg:.2f}",padding:0,style:{fontSize:"0.5em"},verticalAlign:"top"}}),e}(x);C(_.prototype,{nameBase:"Volume by Price",nameComponents:["ranges"],calculateOn:{chart:"render",xAxis:"afterSetExtremes"},pointClass:d,markerAttribs:y,drawGraph:y,getColumnMetrics:g.getColumnMetrics,crispCol:g.crispCol}),h().registerSeriesType("vbp",_);var L=u();return a.default}()});